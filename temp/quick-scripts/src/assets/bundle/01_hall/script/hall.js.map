{"version":3,"sources":["assets\\bundle\\01_hall\\script\\hall.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,oDAAmD;AACnD,wCAAuC;AACvC,0CAAgF;AAChF,8CAA6C;AAE7C,6DAA4D;AAEtD,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAkC,wBAAY;IAA9C;;IA2CA,CAAC;IAzCG,oBAAK,GAAL;QACI,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA,MAAM;QAC5C,qBAAqB;QACrB,IAAI,UAAU,GAAW,aAAK,CAAC,SAAS,CAAC,kBAAS,CAAC,kBAAkB,CAAC,CAAC;QACvE,IAAI,UAAU,IAAI,EAAE,EAAE;YAClB,qBAAY,CAAC,KAAK,GAAG,UAAU,CAAC;SACnC;QAED,IAAI,CAAC,IAAI,EAAE,CAAC;QACZ,IAAI,CAAC,UAAU,EAAE,CAAA;IACrB,CAAC;IAEK,mBAAI,GAAV;;;;;6BACQ,CAAA,mBAAQ,CAAC,IAAI,IAAI,mBAAQ,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAA,EAAzC,wBAAyC;wBACzC,qBAAM,yBAAW,CAAC,KAAK,CAAC,mBAAU,CAAC,YAAY,CAAC,EAAA;;wBAAhD,SAAgD,CAAC;wBACjD,qBAAM,yBAAW,CAAC,IAAI,CAAC,iBAAQ,CAAC,MAAM,CAAC,EAAA;;wBAAvC,SAAuC,CAAC;;4BAExC,qBAAM,yBAAW,CAAC,IAAI,CAAC,iBAAQ,CAAC,KAAK,CAAC,EAAA;;wBAAtC,SAAsC,CAAC;;;;;;KAI9C;IAEO,yBAAU,GAAlB;QACI,IAAI,MAAM,GAAG,2BAAY,CAAC,gBAAgB,CAAC,2BAAY,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QAC1E,MAAM,CAAC,IAAI,CAAC,cAAc,EAAE,UAAC,GAAG,EAAE,KAAmB;YACjD,IAAI,GAAG,EAAE;gBACL,OAAO,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;aACvB;YACD,mBAAQ,CAAC,SAAS,GAAG,KAAK,CAAC,IAAI,CAAA;QACnC,CAAC,CAAC,CAAA;QAEF,MAAM,CAAC,IAAI,CAAC,eAAe,EAAE,UAAC,GAAG,EAAE,KAAmB;YAClD,IAAI,GAAG,EAAE;gBACL,OAAO,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;aACvB;YACD,mBAAQ,CAAC,UAAU,GAAG,KAAK,CAAC,IAAI,CAAA;QACpC,CAAC,CAAC,CAAA;IAEN,CAAC;IAzCgB,IAAI;QADxB,OAAO;OACa,IAAI,CA2CxB;IAAD,WAAC;CA3CD,AA2CC,CA3CiC,EAAE,CAAC,SAAS,GA2C7C;kBA3CoB,IAAI","file":"","sourceRoot":"/","sourcesContent":["import { ViewManager } from \"./config/ViewManager\";\r\nimport { Utils } from \"./config/Utils\";\r\nimport { ComUseStr, GlobalConfig, ViewEnum, WidgetEnum } from \"./config/config\";\r\nimport { UserInfo } from \"./config/UserInfo\";\r\nimport { EventManger } from \"../../00_base/script/common/EventManger\";\r\nimport { bundleLoader } from \"../../../script/bundleLoader\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class hall extends cc.Component {\r\n\r\n    start() {\r\n        cc.game.addPersistRootNode(this.node);//节点常驻\r\n        //通过修改url的参数来修改http地址\r\n        let httpServer: string = Utils.UrlParams(ComUseStr.UrlParamAddressKey);\r\n        if (httpServer != \"\") {\r\n            GlobalConfig.IPort = httpServer;\r\n        }\r\n\r\n        this.load();\r\n        this.onloadJson()\r\n    }\r\n\r\n    async load() {\r\n        if (UserInfo.uuid && UserInfo.uuid.length > 0) {\r\n            await ViewManager.Alert(WidgetEnum.BottomToggle);\r\n            await ViewManager.Open(ViewEnum.FaXian);\r\n        } else {\r\n            await ViewManager.Open(ViewEnum.Login);\r\n        }\r\n        // UserInfo.cwebsocket = new cwebsocket(\"ws://127.0.0.1:8001\", 1);\r\n        // UserInfo.cwebsocket.send(JSON.stringify({ id: 10, info: \"哈哈哈哈\" }));\r\n    }\r\n\r\n    private onloadJson(){\r\n        let bundle = bundleLoader.ENUM_BUNDLE_SAVE[bundleLoader.ENUM_BUNDLE.HALL];\r\n        bundle.load(\"json/seatpos\", (err, asset: cc.JsonAsset) => {\r\n            if (err) {\r\n                return cc.error(err)\r\n            }\r\n            UserInfo.seatPJson = asset.json\r\n        })\r\n\r\n        bundle.load(\"json/lightpos\", (err, asset: cc.JsonAsset) => {\r\n            if (err) {\r\n                return cc.error(err)\r\n            }\r\n            UserInfo.lightPJson = asset.json\r\n        })\r\n       \r\n    }\r\n\r\n}\r\n"]}