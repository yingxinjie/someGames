{"version":3,"sources":["assets\\bundle\\00_base\\script\\common\\EventManger.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["class eventManager {\r\n    private static singe: eventManager = null\r\n    public static get ins(): eventManager { if (this.singe == null) { this.singe = new eventManager(); } return this.singe; }\r\n\r\n    private events: { name: string, cb: Function, cbo: any, once: boolean }[] = []\r\n\r\n    /**\r\n     * 注册事件\r\n     * @param name 事件名称\r\n     * @param cb 事件回调函数\r\n     * @param cbo 事件回调者\r\n     */\r\n    public on(name: string, cb: Function, cbo?: any) {\r\n        if (!this.events) { this.events = [] };\r\n        if (name && cb) {\r\n            this.events.push({ name: name, cb: cb, cbo: cbo, once: false });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 只调用一次的事件注册\r\n     * @param name 事件名称\r\n     * @param cb 事件回调函数\r\n     * @param cbo 事件回调者\r\n     */\r\n    public once(name: string, cb: Function, cbo?: any) {\r\n        if (!this.events) { this.events = [] };\r\n        if (name && cb) {\r\n            this.events.push({ name: name, cb: cb, cbo: cbo, once: true });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 发送数据\r\n     * @param name 事件名称 \r\n     * @param data 事件数据\r\n     * @returns \r\n     */\r\n    public emit(name: string, data?: any) {\r\n        if (!this.events || this.events.length == 0) { cc.error(\"unknown event\"); return; }\r\n\r\n        for (let i = 0; i < this.events.length; i++) {\r\n            let evt: { name: string, cb: Function, cbo: any, once: boolean } = this.events[i];\r\n            if (evt.name == name && evt.cb) {\r\n                if (evt.cbo) {\r\n                    evt.cb.apply(evt.cbo, [data]);\r\n                } else {\r\n                    evt.cb(data);\r\n                }\r\n            }\r\n\r\n            if (evt.once) {\r\n                this.events.splice(i, 1);\r\n                i--;\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    public off(name: string, cb: Function, cbo?: any) {\r\n        if (!this.events || this.events.length == 0) { cc.error(\"unknown event\"); return; }\r\n\r\n        for (let i = 0; i < this.events.length; i++) {\r\n            let evt: { name: string, cb: Function, cbo: any, once: boolean } = this.events[i];\r\n            if (evt.name == name && cb == evt.cb) {\r\n                this.events.splice(i, 1);\r\n                i--;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nexport const EventManger = eventManager.ins;"]}