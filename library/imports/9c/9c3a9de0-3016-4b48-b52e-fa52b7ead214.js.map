{"version":3,"sources":["assets\\bundle\\02_game\\script\\game.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\r\nimport { bundleLoader } from \"../../../script/bundleLoader\";\r\nimport ComponentBase from \"../../00_base/script/common/ComponentBase\";\r\nimport { UserInfo } from \"../../01_hall/script/config/UserInfo\";\r\nimport { ViewManager } from \"../../01_hall/script/config/ViewManager\";\r\nimport { WidgetEnum } from \"../../01_hall/script/config/config\";\r\nimport { cmdClientEvent, cmdClientType } from \"./config/cmdClient\";\r\nimport { Action, DeskInfo, S_Bet, S_Board, S_GameStart } from \"./config/deskInfo\";\r\nimport { DeskMgr } from \"./config/deskMgr\";\r\nimport { DzUtils } from \"./config/dzUtils\";\r\nimport { AutoBtnName, DeskSeatStatus, OperateBtnName, PlayerInfoStatus, TexasAction } from \"./config/gameConst\";\r\nimport { NodeDZpool, POOLTYPE } from \"./config/nodeDZpool\";\r\nimport slider from \"./config/slider\";\r\nimport head from \"./head\";\r\nimport light from \"./light\";\r\nimport timedown from \"./timedown\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class game extends ComponentBase {\r\n\r\n    @property(cc.Node)\r\n    boards: cc.Node[] = [];\r\n\r\n    @property(light)\r\n    light: light = null;\r\n\r\n    @property(slider)\r\n    slider: slider = null;\r\n\r\n    @property(cc.Node)\r\n    alert: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    deskbet: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    deskinfo: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    headItem: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    myOperate: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    sliderNode: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    seats: cc.Node[] = [];\r\n\r\n    @property(cc.Node)\r\n    choumas: cc.Node[] = [];\r\n\r\n    @property(cc.Node)\r\n    bottoms: cc.Node[] = [];\r\n\r\n    @property(cc.Node)\r\n    choumasides: cc.Node[] = [];\r\n\r\n    @property(cc.Node)\r\n    mycards: cc.Node[] = [];\r\n\r\n    @property(cc.Sprite)\r\n    myCardtype: cc.Sprite = null;\r\n\r\n    @property(cc.Label)\r\n    labMyscore: cc.Label = null;\r\n\r\n    private heads: { [trueSeat: number]: cc.Node } = {}\r\n\r\n    /** 桌子坐标 */\r\n    private curSeatP: [{ x: number, y: number }]\r\n\r\n    private labdichi: cc.Label\r\n    private chouma_di: cc.Label\r\n\r\n    private operNode: cc.Node\r\n    private notOperNode: cc.Node\r\n    private btnAddtime: cc.Node\r\n\r\n\r\n    protected start(): void {\r\n        this.initprops()\r\n        // this.test()\r\n        //return\r\n\r\n\r\n        //消息回调\r\n        UserInfo.cwebsocket.on(cmdClientEvent.BET, this.svr_bet, this)\r\n        UserInfo.cwebsocket.on(cmdClientEvent.GAMESTART, this.svr_gamestart, this)\r\n        UserInfo.cwebsocket.on(cmdClientEvent.GAMEOVER, this.svr_gameover, this)\r\n        UserInfo.cwebsocket.on(cmdClientEvent.SITDOWNORSTANDUP, this.svr_downup, this)\r\n        UserInfo.cwebsocket.on(cmdClientEvent.START, this.svr_start, this)\r\n        UserInfo.cwebsocket.on(cmdClientEvent.BOARD, this.svr_board, this)\r\n        UserInfo.cwebsocket.on(cmdClientEvent.BRING, this.svr_bring, this)\r\n        UserInfo.cwebsocket.on(cmdClientEvent.INSURANCE, this.svr_insurance, this)\r\n        UserInfo.cwebsocket.on(cmdClientEvent.EXIT, this.svr_exit, this)\r\n\r\n        //事件回调\r\n        this.TouchOn(this.alert.children[2], this.evt_start, this) // 房主游戏开始\r\n\r\n        for (let i = 0; i < this.bottoms.length; i++) {\r\n            let btn = this.bottoms[i]\r\n            this.TouchOn(btn, this.evt_bottom, this) // 游戏场景下方按钮事件\r\n        }\r\n\r\n        this.operNode.children.forEach(btn => {\r\n            this.TouchOn(btn, this.evt_operate, this)\r\n        });\r\n\r\n        this.notOperNode.children.forEach(btn => {\r\n            this.TouchOn(btn, this.evt_auto, this)\r\n        });\r\n\r\n        this.slider.setCallback(this.evt_slidecall, this)\r\n\r\n\r\n        this.init()\r\n\r\n\r\n    }\r\n\r\n\r\n    test() {\r\n        this.slider.init(100, 0.1)\r\n        this.slider.setCallback(this.evt_slidecall, this)\r\n        setTimeout(() => {\r\n\r\n        }, 1000);\r\n    }\r\n\r\n    protected onLoad(): void {\r\n        UserInfo.cwebsocket.on(cmdClientEvent.CONNECT, this.svr_connect, this) // 只处理数据\r\n        UserInfo.cwebsocket.on(cmdClientEvent.RECONNECT, this.svr_connect, this) // 只处理数据\r\n\r\n        NodeDZpool.initCard()\r\n        NodeDZpool.initCoin()\r\n    }\r\n    //消息回调\r\n    private svr_connect(data: any) {\r\n        if (data.requestType == cmdClientType.SERVERTOCLIENT) {\r\n            DeskInfo.setLplayer(data.requestData.id, data.requestData)\r\n        }\r\n    }\r\n\r\n    private svr_bet(data: any) {\r\n        console.log(\"svr_bet\")\r\n        if (!data) return cc.error(\"数据错误\")\r\n        let _data: S_Bet = data.requestData\r\n        DeskInfo.currRoundPlayerId = _data.nextPlayerId\r\n        DeskInfo.playerBetTime = _data.nextBetTime\r\n\r\n        this.heads[_data.playerId].getComponent(head).setStopTime()\r\n\r\n        \r\n\r\n    }\r\n\r\n    private svr_gamestart(data: any) {\r\n        console.log(\"svr_gamestart\")\r\n        //   this.card.active = false\r\n        let _data: S_GameStart = data.requestData\r\n        this.switchAlert(-1)\r\n        let isJoinGame: boolean = false\r\n\r\n\r\n        DeskInfo.currRoundPlayerId = _data.curPlayerId\r\n        DeskInfo.playerBetTime = _data.betTime\r\n        DeskInfo.deskId = _data.deskId\r\n        DeskInfo.pots = _data.playerPots\r\n        DeskInfo.pots.forEach((pot, index) => {\r\n            let pots = DeskMgr.addPots(pot)\r\n            if (index == 0) {\r\n                this.setDichi(pots)\r\n            } else {\r\n                this.setSidechi(pots, index)\r\n            }\r\n        });\r\n\r\n        _data.seatPlayerList.forEach(dplayer => {\r\n            DeskInfo.setDplayer(dplayer.position, dplayer)\r\n            if (dplayer.playerId > 0) {\r\n                let clientSeat: number = this.getClientSeatByTureSeat(dplayer.position)\r\n                this.setChoumaNum(0, clientSeat - 1)\r\n\r\n                let head = this.heads[dplayer.position]\r\n                head.getChildByName(\"sprTwoCard\").active = false\r\n\r\n                DeskMgr.TweenSendCard(head, () => {\r\n                    if (dplayer.position == UserInfo.testuuid) {\r\n                        let dplayer = DeskInfo.getMydplayer()\r\n                        dplayer.handsCard.forEach((card, index) => {\r\n                            DeskMgr.setCard(this.mycards, index, card.value)\r\n                            DeskMgr.TweenTurnCard(this.mycards[index], () => {\r\n                                this.mycards[index].getChildByName(\"cardbg\").active = false\r\n                            })\r\n                        })\r\n                    } else {\r\n                        head.getChildByName(\"sprTwoCard\").active = true\r\n                    }\r\n                }, this.node)\r\n\r\n                if (dplayer.playerId == DeskInfo.currRoundPlayerId) {\r\n                    this.setLigth(dplayer.position)\r\n                }\r\n                isJoinGame = (dplayer.playerId == UserInfo.testuuid)\r\n            }\r\n        });\r\n\r\n        if (DeskInfo.currRoundPlayerId == UserInfo.testuuid) {\r\n            this.switchOperate(true, _data.actions, isJoinGame)\r\n\r\n        } else {\r\n            this.switchOperate(false, _data.actions, isJoinGame)\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    private svr_gameover(data: any) {\r\n        console.log(\"svr_gameover\")\r\n        if (!data) return cc.error(\"数据错误\")\r\n        let _data: S_GameStart = data.requestData\r\n    }\r\n\r\n    private svr_downup(data: any) {\r\n        if (!data) return cc.error(\"数据错误\")\r\n        let _data = data.requestData\r\n        if (_data.status == DeskSeatStatus.TEMPORARY) {\r\n            if (UserInfo.testuuid == _data.playerId) {\r\n                ViewManager.Alert(WidgetEnum.JoinDesk, bundleLoader.ENUM_BUNDLE.GAME)\r\n                let clientSeat = this.getClientSeatByTureSeat(_data.position)\r\n                DeskMgr.setconvertNum(clientSeat)\r\n                this.setHeadInfo(clientSeat, _data.playerId)\r\n                DeskMgr.TweenSeat(this.seats)\r\n            } else {\r\n                let clientSeat = this.getClientSeatByTureSeat(_data.position)\r\n                this.setHeadInfo(clientSeat, _data.playerId)\r\n            }\r\n\r\n            DeskInfo.setplayerInfo(_data.playerId, _data.position, _data.status)\r\n\r\n        } else if (_data.status == DeskSeatStatus.SITDOWN) {\r\n            let clientSeat = this.getClientSeatByTureSeat(_data.position)\r\n            this.setHeadInfo(clientSeat, _data.playerId)\r\n            DeskInfo.setplayerInfo(_data.playerId, _data.position, _data.status)\r\n        } else {\r\n\r\n            this.removeHead(_data.position, _data.playerId)\r\n        }\r\n    }\r\n\r\n\r\n    private svr_start(data: any) {\r\n        console.log(\"svr_bet\")\r\n    }\r\n\r\n    private svr_board(data: any) {\r\n        console.log(\"svr_board\")\r\n        if (!data) return cc.error(\"数据错误\")\r\n        let _data: S_Board = data.requestData\r\n        DeskInfo.currRoundPlayerId = _data.nextPlayerId\r\n        DeskInfo.playerBetTime = _data.nextBetTime\r\n        DeskInfo.deskId = _data.deskId\r\n       \r\n    }\r\n\r\n    private svr_bring(data: any) {\r\n        console.log(\"svr_bring\")\r\n    }\r\n\r\n    private svr_insurance(data: any) {\r\n        console.log(\"svr_insurance\")\r\n    }\r\n\r\n    private svr_exit(data: any) {\r\n        console.log(\"svr_exit\")\r\n    }\r\n\r\n\r\n    //事件回调\r\n    private evt_sitdown(e: cc.Event.EventTouch) {\r\n        let name = e.currentTarget.name\r\n        // let seat = DeskMgr.convertobj[Number(name.slice(-1)) + 1]\r\n        // let seat = Number(name.slice(-1)) + 1\r\n        let seat = this.getTureSeatByClientSeat(Number(name.slice(-1)) + 1)\r\n        DeskInfo.readyPos = seat\r\n        let info = {\r\n            playerId: UserInfo.testuuid,\r\n            deskId: 9,\r\n            position: DeskInfo.readyPos,\r\n            status: DeskSeatStatus.TEMPORARY\r\n        }\r\n        UserInfo.cwebsocket.clientSend(cmdClientEvent.SITDOWNORSTANDUP, info)\r\n        //console.log(e)\r\n\r\n    }\r\n\r\n\r\n    private evt_start(e: cc.Event.EventTouch) {\r\n        console.log(\"evt_start\")\r\n        if (UserInfo.testuuid == DeskInfo.createDeskPlayerId) {\r\n            let info = {\r\n                playerId: UserInfo.testuuid,\r\n                deskId: 9\r\n            }\r\n            UserInfo.cwebsocket.clientSend(cmdClientEvent.START, info)\r\n        }\r\n    }\r\n\r\n    private evt_bottom(e: cc.Event.EventTouch) {\r\n        console.log(\"evt_bottom\")\r\n        let name = e.currentTarget.name\r\n        switch (Number(name.slice(-1))) {\r\n            case 0:\r\n\r\n                break;\r\n            case 1:\r\n\r\n                break;\r\n            case 2:\r\n\r\n                break;\r\n            case 3:\r\n\r\n                break;\r\n            case 4:\r\n                ViewManager.Alert(WidgetEnum.GameSetting, bundleLoader.ENUM_BUNDLE.GAME)\r\n                break;\r\n        }\r\n    }\r\n\r\n    private evt_operate(e: cc.Event.EventTouch) {\r\n        console.log(\"evt_operate\")\r\n        let name = e.currentTarget.name\r\n        let info = {\r\n            playerId: UserInfo.testuuid,\r\n            deskId: 9,\r\n            action: \"\",\r\n            bet: 0\r\n        }\r\n        switch (name) {\r\n            case OperateBtnName.btnAdd:\r\n                this.sliderNode.active = true\r\n                break;\r\n            case OperateBtnName.btnGen:\r\n                info.action = TexasAction.CALL\r\n                break;\r\n            case OperateBtnName.btnGiveup:\r\n                info.action = TexasAction.FOLD\r\n                break;\r\n            case OperateBtnName.btnLook:\r\n                info.action = TexasAction.CHECK\r\n                break;\r\n            case OperateBtnName.btnB1:\r\n                info.action = TexasAction.BET\r\n                break;\r\n            case OperateBtnName.btnB2:\r\n\r\n                break;\r\n            case OperateBtnName.btnB3:\r\n\r\n                break;\r\n            case OperateBtnName.btnB4:\r\n\r\n                break;\r\n        }\r\n        if (OperateBtnName.btnAdd == name) return\r\n        info.bet = DeskInfo.curMyAcitons[info.action]\r\n        UserInfo.cwebsocket.clientSend(cmdClientEvent.BET, info)\r\n    }\r\n\r\n\r\n    private evt_auto(e: cc.Event.EventTouch) {\r\n        console.log(\"evt_auto\")\r\n        let name = e.currentTarget.name\r\n    \r\n        switch (name) {\r\n            case AutoBtnName.btnAuto:\r\n                \r\n                break;\r\n            case AutoBtnName.btnAutoCancel:\r\n\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    async evt_slidecall(value: number) {\r\n\r\n        let url1 = value >= this.slider._maxValue() ? \"slider2\" : (value <= this.slider._minValue() ? \"slider0\" : \"slider1\")\r\n        let url2 = value >= this.slider._maxValue() ? \"max\" : (value <= this.slider._minValue() ? \"normal\" : \"normal\")\r\n        let color = value >= this.slider._maxValue() ? \"#FFFFFF\" : (value <= this.slider._minValue() ? \"#FF0000\" : \"#FFFFFF\")\r\n\r\n        this.slider.setHandleSprite(url1)\r\n        this.slider.setBackgroundSprite(url2)\r\n        this.slider.setLabColor(color)\r\n\r\n        this.slider.Handlelab.node.active = !(value >= this.slider._maxValue())\r\n    }\r\n\r\n    //初始化\r\n    init() {\r\n        this.curSeatP = UserInfo.seatPJson[DeskInfo.seatLen]\r\n        for (let i = 0; i < DeskInfo.seatLen; i++) {\r\n            this.seats[i].x = this.curSeatP[i].x\r\n            this.seats[i].y = this.curSeatP[i].y\r\n            this.seats[i].active = true\r\n            this.TouchOn(this.seats[i], this.evt_sitdown, this)\r\n            let dplayer = DeskInfo.getDplayer(i + 1)\r\n            if (dplayer) {\r\n                this.craeteHead(dplayer.position, dplayer.playerId)\r\n            }\r\n        }\r\n\r\n        let Mylplayer = DeskInfo.getMylplayer()\r\n        if (Mylplayer.position > 0) {\r\n            DeskMgr.setconvertNum(Mylplayer.position)\r\n            DeskInfo.readyPos = Mylplayer.position\r\n            DeskMgr.initSeat(this.seats)\r\n        }\r\n\r\n        if (UserInfo.testuuid == DeskInfo.createDeskPlayerId) {\r\n            this.switchAlert(2)\r\n        }\r\n\r\n        this.light.init(DeskInfo.seatLen)\r\n        //  this.setMyCard(0, 30)\r\n\r\n\r\n\r\n    }\r\n\r\n    initprops() {\r\n        this.labdichi = this.deskbet.getChildByName(\"labdichi\").getComponent(cc.Label)\r\n        this.chouma_di = this.deskbet.getChildByName(\"chouma_di\").getComponentInChildren(cc.Label)\r\n        this.notOperNode = this.myOperate.getChildByName(\"notoperNode\")\r\n        this.operNode = this.myOperate.getChildByName(\"operNode\")\r\n        this.btnAddtime = this.myOperate.getChildByName(\"btnAddtime\")\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    setChoumaNum(Num: number, index: number,) {\r\n        this.choumas[index].getComponentInChildren(cc.Label).string = \"\" + Num\r\n        this.choumas[index].active = true\r\n    }\r\n\r\n\r\n    setDichi(dichiNum: number) {\r\n        this.labdichi.string = \"\" + dichiNum\r\n        this.chouma_di.string = \"\" + dichiNum\r\n        this.chouma_di.node.active = true\r\n        this.labdichi.node.active = true\r\n    }\r\n\r\n    setSidechi(sidechiNum: number, index) {\r\n        this.choumasides[index - 1].active = true\r\n        this.choumasides[index - 1].getChildByName(\"labside\").getComponent(cc.Label).string = \"\" + sidechiNum\r\n    }\r\n\r\n\r\n    switchAlert(index) {\r\n        this.alert.children.forEach((child, _index) => {\r\n            child.active = index == _index\r\n        });\r\n    }\r\n\r\n\r\n    craeteHead(seat: number, id: number) {\r\n        let seatNode = this.seats[seat - 1]\r\n        let _head = cc.instantiate(this.headItem)\r\n        let _ts = _head.getComponent(head)\r\n        _ts.init(id, seat, seat)\r\n        _head.parent = seatNode\r\n        _head.x = 0\r\n        _head.y = 0\r\n        this.heads[seat] = _head\r\n    }\r\n\r\n\r\n    setHeadInfo(seat: number, id: number) {\r\n        let seatNode = this.seats[seat - 1]\r\n        let _head = seatNode.children[0]\r\n        let _ts = _head.getComponent(head)\r\n        _ts.setHeadInfo(id)\r\n    }\r\n\r\n    setLigth(tureSeat: number) {\r\n        let clientSeat = this.getClientSeatByTureSeat(tureSeat)\r\n        this.light.setAngle(clientSeat)\r\n    }\r\n\r\n\r\n\r\n    getTureSeatByClientSeat(clientSeat: number) {\r\n        let trueSeat = 0\r\n        let seatNode = this.seats[clientSeat - 1]\r\n        let _head = seatNode.children[0]\r\n        let _ts = _head.getComponent(head)\r\n        trueSeat = _ts.seat\r\n        return trueSeat\r\n    }\r\n\r\n    getClientSeatByTureSeat(trueSeat: number) {\r\n        let clientSeat = 0\r\n        let head = this.heads[trueSeat]\r\n        clientSeat = Number(head.parent.name.slice(-1)) + 1\r\n        return clientSeat\r\n    }\r\n\r\n    removeHead(trueSeat: number, id: number) {\r\n        this.seats.forEach((seat, index) => {\r\n            let _head = seat.children[0]\r\n            if (_head) {\r\n                let _ts = _head.getComponent(head)\r\n                if (_ts.playerId == id) {\r\n                    _ts.clearhead()\r\n                    //_head.destroy()\r\n                }\r\n                _ts.convertseat = index + 1\r\n            }\r\n        });\r\n\r\n        DeskInfo.clearDplayer(trueSeat)\r\n    }\r\n\r\n    switchOperate(isShow: boolean, actions: Action[], isJoinGame: boolean) {\r\n        this.myOperate.active = isJoinGame\r\n        this.operNode.active = isShow\r\n        this.notOperNode.active = !isShow\r\n        actions.forEach(ele => {\r\n            this.setBtnOper(ele.action, ele.minBet)\r\n        });\r\n    }\r\n\r\n\r\n    setBtnOper(action: TexasAction, minBet: number) {\r\n        let btn: cc.Node = null\r\n        switch (action) {\r\n            case TexasAction.BET:\r\n                btn = this.operNode.children[4]\r\n                btn.getChildByName(\"labBNum\").getComponent(cc.Label).string = \"x\" + 1\r\n                btn.getChildByName(\"labB\").getComponent(cc.Label).string = \"快速下注\"\r\n                btn.getChildByName(\"labBScore\").getComponent(cc.Label).string = \"\" + minBet\r\n                break;\r\n\r\n            case TexasAction.CALL:\r\n                btn = this.operNode.children[3]\r\n                btn.getChildByName(\"labGenNum\").getComponent(cc.Label).string = \"x\" + minBet\r\n                break;\r\n\r\n            case TexasAction.CHECK:\r\n                this.operNode.children[1].getComponent(timedown).stopTime()\r\n                btn = this.operNode.children[2]\r\n                btn.getComponent(timedown).playTime(DeskInfo.playerBetTime)\r\n                break;\r\n\r\n            case TexasAction.RAISE:\r\n            case TexasAction.RERAISE:\r\n                btn = this.operNode.children[0]\r\n                let lpayer = DeskInfo.getMylplayer()\r\n                this.slider.init(lpayer.bankRoll, minBet)\r\n                break;\r\n\r\n            case TexasAction.FOLD:\r\n                btn = this.operNode.children[1]\r\n                btn.getComponent(timedown).playTime(DeskInfo.playerBetTime)\r\n                break;\r\n\r\n\r\n        }\r\n        DeskInfo.curMyAcitons[action] = minBet\r\n        if (btn) btn.active = true\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    //其他钩子函数\r\n\r\n    // private nowTime: number = 0\r\n\r\n    // private nowTimeInt: number = 0\r\n\r\n    // private nowClockLabel: cc.Label = null\r\n\r\n    // update(dt: number) {\r\n    //     if (!DeskInfo.isStartGame) {\r\n    //         return;\r\n    //     }\r\n    //     this.nowTime -= dt;\r\n    //     let tmpInt = Math.floor(this.nowTime);\r\n    //     if (tmpInt !== this.nowTimeInt && tmpInt >= 0) {\r\n    //         this.nowTimeInt = tmpInt;\r\n    //         if (this.nowClockLabel) {\r\n    //             this.nowClockLabel.string = tmpInt.toString();\r\n    //         }\r\n    //     }\r\n    // }\r\n\r\n\r\n    protected onDestroy(): void {\r\n        UserInfo.cwebsocket.off(cmdClientEvent.CONNECT, this.svr_connect, this)\r\n        UserInfo.cwebsocket.off(cmdClientEvent.BET, this.svr_bet, this)\r\n        UserInfo.cwebsocket.off(cmdClientEvent.GAMESTART, this.svr_gamestart, this)\r\n        UserInfo.cwebsocket.off(cmdClientEvent.GAMEOVER, this.svr_gameover, this)\r\n        UserInfo.cwebsocket.off(cmdClientEvent.SITDOWNORSTANDUP, this.svr_downup, this)\r\n        UserInfo.cwebsocket.off(cmdClientEvent.START, this.svr_start, this)\r\n        UserInfo.cwebsocket.off(cmdClientEvent.BOARD, this.svr_board, this)\r\n        UserInfo.cwebsocket.off(cmdClientEvent.BRING, this.svr_bring, this)\r\n        UserInfo.cwebsocket.off(cmdClientEvent.INSURANCE, this.svr_insurance, this)\r\n        UserInfo.cwebsocket.off(cmdClientEvent.EXIT, this.svr_exit, this)\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n}\r\n"]}