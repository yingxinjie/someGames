{"version":3,"sources":["assets\\bundle\\01_hall\\script\\config\\C_User.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { HttpPath } from \"./config\";\r\nimport { cwebsocket } from \"./cwebsocket\";\r\nimport { D_Set } from \"./D_Set\";\r\nimport { D_User } from \"./D_User\";\r\nimport { Utils } from \"./Utils\";\r\n\r\nexport class C_User {\r\n    private static sing: C_User = null\r\n\r\n    public static get ins(): C_User {\r\n        if (this.sing == null) {\r\n            this.sing = new C_User();\r\n        }\r\n        return this.sing;\r\n    }\r\n\r\n    private _uid: string = \"\";\r\n\r\n    /** uid */\r\n    public set uid(val: string) {\r\n        cc.sys.localStorage.setItem(\"uuid\", val);\r\n        this._uid = val;\r\n    }\r\n    /** uid */\r\n    public get uid(): string {\r\n        let uuid: string = cc.sys.localStorage.getItem(\"uuid\");\r\n        if (!uuid || uuid == \"\") {\r\n            return \"\";\r\n        }\r\n\r\n        this._uid = uuid;\r\n        return this._uid;\r\n    }\r\n\r\n    private _token: string = \"\";\r\n\r\n    public set token(val: string) {\r\n        cc.sys.localStorage.setItem(\"token\", val);\r\n        this._token = val;\r\n    }\r\n\r\n    public get token(): string {\r\n        let token: string = cc.sys.localStorage.getItem(\"token\");\r\n        if (!token) {\r\n            return \"\";\r\n        }\r\n\r\n        this._token = token;\r\n        return this._token;\r\n    }\r\n\r\n    private _me: D_User;\r\n    get me(): D_User {\r\n        if (!this._me) {\r\n            this._me = new D_User();\r\n        }\r\n        return this._me;\r\n    }\r\n\r\n    private _set: D_Set;\r\n    get set(): D_Set {\r\n        if (!this._set) {\r\n            this._set = new D_Set();\r\n        }\r\n        return this._set;\r\n    }\r\n\r\n    private _language: number = 0;\r\n    public set language(val: number) {\r\n        this._language = val;\r\n        cc.sys.localStorage.setItem(\"language\", val);\r\n    }\r\n    public get language(): number {\r\n        let id = cc.sys.localStorage.getItem(\"language\");\r\n        if (!id) {\r\n            id = 0;\r\n        }\r\n        this._language = Number(id);\r\n        return this._language;\r\n    }\r\n\r\n    /** 游戏长连接管理 */\r\n    public cwebsocket: cwebsocket = null;\r\n\r\n    public clearLogin() {\r\n        cc.sys.localStorage.setItem(\"token\", \"\");\r\n        cc.sys.localStorage.setItem(\"uuid\", \"\");\r\n    }\r\n\r\n    public seatPJson: any\r\n    public lightPJson: any\r\n\r\n    //---------------------------------------server------------------------------------------\r\n    remark: string;\r\n    /**修改备注 */\r\n    async sendUserRemark(remark: string) {\r\n        let data = {\r\n            current: 1,\r\n            size: 20,\r\n            userId: C_User.ins.uid,\r\n            remark: remark\r\n        }\r\n        let res: any = await Utils.Post(HttpPath.userRemark, data);\r\n        this.remark = res.data.remark;\r\n    }\r\n\r\n    /**查询备注 */\r\n    async sendUserRemarkQuery() {\r\n        let data = {\r\n            current: 1,\r\n            size: 20,\r\n            userId: C_User.ins.uid,\r\n        }\r\n        let res: any = await Utils.Post(HttpPath.queryUserRemark, data);\r\n        this.remark = res.data.remark;\r\n    }\r\n\r\n    searchUser: D_User;\r\n    /**根据关键字查询用户信息，用户编号或用户名称*/\r\n    async sendUserSearch(keyWord: string) {\r\n        let data = {\r\n            current: 1,\r\n            size: 20,\r\n            keyWord: keyWord,\r\n        }\r\n        let res: any = await Utils.Post(HttpPath.userSearch, data);\r\n        this.searchUser = new D_User();\r\n        this.searchUser.init(res.data.id, res.data.name, res.data.sex, res.data.handPic, res.data.vipValidityPeriod, res.data.vipType,\r\n            res.data.email, res.data.code, res.data.description, res.data.phoneAreaCode, res.data.phoneNumber, Number(res.data.gold),\r\n            Number(res.data.diamond), res.data.lastLoginTime, res.data.clubNum, res.data.joinClubNum)\r\n    }\r\n\r\n    operateCode: string;\r\n    /**安全验证 验证码/手机国际地区,绑定手机的时候必填/手机,绑定手机的时候必填/email,绑定邮箱的时候必填/验证类型,(enums),PHONE=手机,EMAIL=邮箱*/\r\n    async sendSafetyValidate(captcha: string, phoneAreaCode: string, phoneNumber: string, email: string, type: string) {\r\n        let data = {\r\n            captcha: captcha,\r\n            phoneAreaCode: phoneAreaCode,\r\n            phoneNumber: phoneNumber,\r\n            email: email,\r\n            type: type\r\n        }\r\n        let res: any = await Utils.Post(HttpPath.safetyValidate, data);\r\n        this.operateCode = res.data.operateCode;\r\n    }\r\n\r\n    /**个人信息查询 */\r\n    async sendUserQuery() {\r\n        let data = {\r\n        }\r\n        let res: any = await Utils.Post(HttpPath.userQuery, data);\r\n        C_User.ins.me.init(res.data.id, res.data.name, res.data.sex, res.data.handPic, res.data.vipValidityPeriod, res.data.vipType,\r\n            res.data.email, res.data.code, res.data.description, res.data.phoneAreaCode, res.data.phoneNumber, Number(res.data.gold),\r\n            Number(res.data.diamond), res.data.lastLoginTime, res.data.clubNum, res.data.joinClubNum);\r\n    }\r\n\r\n    /**个人设置查询 */\r\n    async sendUserQueryConfig() {\r\n        let data = {\r\n        }\r\n        let res: any = await Utils.Post(HttpPath.userQueryConfig, data);\r\n        C_User.ins.set.init(res.data.language,res.data.languageDesc,res.data.safetyPasswordProtection,res.data.safetyLogin,\r\n            res.data.allowEveryoneFriending,res.data.soundEffect,res.data.messageSound,res.data.messageVibration,\r\n            res.data.competitionRegConfirmation);\r\n    }\r\n    \r\n\r\n}"]}